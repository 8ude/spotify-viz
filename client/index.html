<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Spotify Viz</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <style>
      *, *:before, *:after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <noscript>Oops! JavaScript is required to run this page.</noscript>

    <script type="x-shader/x-vertex" id="vertexshader">
			uniform float amplitude;
			attribute float displacement;
			varying vec3 vNormal;
			varying vec2 vUv;
			void main() {
				vNormal = normal;
				vUv = ( 0.5 + amplitude ) * uv + vec2( amplitude );
				vec3 newPosition = position + amplitude * normal * vec3( displacement );
				gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );
			}
		</script>

		<script type="x-shader/x-fragment" id="fragmentshader">
			varying vec3 vNormal;
			varying vec2 vUv;
			uniform vec3 color;

			void main() {
				vec3 light = vec3( 0.5, 0.2, 1.0 );
				light = normalize( light );
				float dProd = dot( vNormal, light ) * 0.5 + 0.5;
				vec4 gray = vec4( vec3( 1.0 * 0.3 + 1.0 * 0.59 + 1.0 * 0.11 ), 1.0 );
				gl_FragColor = gray * vec4( vec3( dProd ) * vec3( color ), 1.0 );
			}
		</script>
  </body>
</html>
